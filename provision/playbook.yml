- hosts: all
  vars:
    synced_folder: /home/vagrant/playgrounds
    docker_users:
      - vagrant

  roles:
    # Ansible role to install docker
    # https://galaxy.ansible.com/geerlingguy/docker
    - geerlingguy.docker

  tasks:
    - name: Create third party playground directory
      ansible.builtin.file:
        path: "{{ synced_folder }}/third_party"
        state: directory
    - name: Fetch third party playgrounds
      ansible.builtin.git:
        repo: "{{ item.src }}"
        dest: "{{ synced_folder }}/third_party/{{ item.name }}"
      loop:
          # Turnkey sandbox projects demonstrating a wide variety of Prometheus use cases
        - src: https://github.com/prometheus-community/prometheus-playground.git
          name: prometheus-community
          # https://iximiuz.com/en/posts/prometheus-learning-promql/
        - src: https://github.com/iximiuz/prometheus-playground.git
          name: iximiuz
          # A full docker based Prometheus / Grafana Environment to play around
          # https://github.com/blndev/prometheus-playground
        - src: https://github.com/blndev/prometheus-playground.git
          name: blndev
